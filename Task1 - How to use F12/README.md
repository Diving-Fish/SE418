# Analyze the home page loading of SJTU

## 1. Analyze

进入 https://www.sjtu.edu.cn/ ，打开Devtool，选择Performance工具，重载页面。

选取从Parse HTML到Onloading的时间范围，得到整体时间分布如下：

![][1]

与复旦主页 http://www.fudan.edu.cn/ 对比：

![][2]

同样的CPU及网络环境下，发现交大的主页载入时间明显大于复旦。分别分析两校的时间轴，如图所示：

![][3]
![][4]

可初步得出交大主页需要加载的内容比复旦主页多。然而，交大加载过程中的两个红色三角引起了我的注意，放大查看之：

![][5]

发现交大DCL和On Load阶段的Handler都花费了异常多的时间，并且造成了加载时间上的浪费（333.4ms的空闲时间）：

![][6]

反观复旦，只花了28.14ms，并且没有任何时间浪费。

对比两个网站的加载截图：

![][7] ![][8]

![][9] ![][10]

可以发现，交大的加载过程先行加载了背景的大量图片资源和样式，造成了不必要的时间浪费。

## 2. Optimization

> * 把style和图片的加载放在Loading阶段而不是DCL阶段
> * 压缩足够清晰的图片大小，以提升加载速度
> * 优化调用逻辑，利用空闲时间



[1]: ./1.png
[2]: ./2.png
[3]: ./3.png
[4]: ./4.png
[5]: ./5.png
[6]: ./6.png
[7]: ./7.png
[8]: ./8.png
[9]: ./9.png
[10]: ./10.png